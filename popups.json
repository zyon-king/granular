{
  "script": "function showCustomPopup(type, icon, title, message, buttons, resolveCallback = null) {\n  const popup = document.createElement(\'div\');\n  popup.classList.add(\'popup\');\n\n  const content = document.createElement(\'div\');\n  content.classList.add(\'popup-content\', type);\n\n  popup.appendChild(content);\n\n  if (icon) {\n    const iconEl = document.createElement(\'span\');\n    iconEl.classList.add(\'popup-icon\');\n    iconEl.innerHTML = icon;\n    content.appendChild(iconEl);\n  }\n\n  const titleEl = document.createElement(\'h2\');\n  titleEl.textContent = title;\n  content.appendChild(titleEl);\n\n  const messageEl = document.createElement(\'p\');\n  messageEl.textContent = message;\n  content.appendChild(messageEl);\n\n  const buttonsEl = document.createElement(\'div\');\n  buttonsEl.classList.add(\'popup-buttons\');\n  content.appendChild(buttonsEl);\n\n  buttons.forEach(button => {\n    const buttonEl = document.createElement(\'button\');\n    buttonEl.textContent = button.text;\n    buttonEl.classList.add(\'popup-btn\', \'popup-btn-primary\');\n    buttonEl.addEventListener(\'click\', () => {\n      if (resolveCallback) {\n        resolveCallback(button.value);\n      }\n      popup.classList.add(\'fade-out\');\n      setTimeout(() => popup.remove(), 500);\n    });\n    buttonsEl.appendChild(buttonEl);\n  });\n\n  popup.addEventListener(\'click\', (e) => {\n    if (e.target === popup) {\n      if (resolveCallback) resolveCallback(null);\n      popup.classList.add(\'fade-out\');\n      setTimeout(() => popup.remove(), 500);\n    }\n  });\n\n  document.body.appendChild(popup);\n}\n\nfunction showConfirm(message) {\n  return new Promise(resolve => {\n    showCustomPopup(\'confirm\', \'❓\', \'Confirmação\', message, [\n      { text: \'Sim\', value: true },\n      { text: \'Não\', value: false }\n    ], resolve);\n  });\n}\n\nfunction showSuccess(message) {\n  showCustomPopup(\'success\', \'✅\', \'Sucesso\', message, [\n    { text: \'OK\', value: null }\n  ]);\n}\n\nfunction showError(message) {\n  showCustomPopup(\'error\', \'⚠️\', \'Alerta\', message, [\n    { text: \'OK\', value: null }\n  ]);\n}\n\nfunction showMessage(text, className = \'\') {\n  const mensagemElement = document.getElementById(\'mensagem\');\n  if (mensagemElement) {\n    mensagemElement.innerHTML = text;\n    mensagemElement.className = className;\n  }\n}\n\nfunction showInitialMessage() {\n  showError(\"Por favor, sempre permita as notificações para não perder alertas importantes!\");\n}\n\nfunction isNotificationSupported() {\n  return \"Notification\" in window;\n}\n\nfunction isPermissionGranted() {\n  return Notification.permission === \"granted\";\n}\n\nfunction isPermissionDenied() {\n  return Notification.permission === \"denied\";\n}\n\nfunction isIncognitoMode() {\n  try {\n    window.localStorage.setItem(\'test\', \'test\');\n    window.localStorage.removeItem(\'test\');\n    return false;\n  } catch (e) {\n    return true;\n  }\n}\n\nfunction askForNotificationPermission() {\n  if (!isNotificationSupported()) {\n    showError(\"Seu navegador não suporta notificações.\");\n    return;\n  }\n  if (isIncognitoMode()) {\n    showError(\"Notificações não funcionam na aba anônima.\");\n    return;\n  }\n  if (isPermissionGranted()) {\n    showSuccess(\"Notificações foram permitidas!\");\n    return;\n  }\n  if (isPermissionDenied()) {\n    showError(\"Permissão já foi negada anteriormente. Dica: notificações não são permitidas no modo anônimo.\");\n    return;\n  }\n  try {\n    Notification.requestPermission().then(permission => {\n      if (permission === \"granted\") {\n        showSuccess(\"Notificações ativadas com sucesso!\");\n      } else {\n        showError(\"Permissão negada. Por favor, verifique as configurações do navegador.\");\n      }\n    });\n  } catch (error) {\n    showError(\"Erro ao solicitar permissão: \" + error.message);\n  }\n}\n\nfunction runTests() {\n  console.log(\"isNotificationSupported():\", isNotificationSupported());\n  console.log(\"isPermissionGranted():\", isPermissionGranted());\n  console.log(\"isPermissionDenied():\", isPermissionDenied());\n  console.log(\"isIncognitoMode():\", isIncognitoMode());\n}\n\nfunction onReady(fn) {\n  if (document.readyState === \'loading\') {\n    document.addEventListener(\'DOMContentLoaded\', fn);\n  } else {\n    fn();\n  }\n}"
}
